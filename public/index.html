<!DOCTYPE html>
<html>
  <head>
    <script src="//d3js.org/d3.v2.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
    <script src="/js/lodash.min.js"></script>
    <link href="/css/aristo.css" rel="stylesheet"/>
    <link href="/css/main.css" rel="stylesheet"/>
  </head>
  <body>

    <div style="display: none;">
      <div id="dialog-form" title="Where should we start?">
        <p class="validateTips">Let's pick a musical artist to start with:</p>
        <form>
          <input type="text" name="artist" id="input-artist" class="text ui-widget-content ui-corner-all" placeholder="The Rolling Stones" />
        </form>
      </div>
    </div>

    <script src="/js/application.js"></script>
    <script>
/*      (function(ml) {
      ml.instance = new ml.Application({
      rootName: prompt("Where should we start?")
      });
      })(window.Musicline); */

      $("#dialog-form").dialog({
        autoOpen: true,
        modal:    false,
        height:   210,
        width:    350,
        buttons: [{
          text: 'Go!',
          click: function() { $(this).dialog('close'); }
        }],
        close: function() {
          var artist = $("#input-artist").val().trim();
          var ml = window.Musicline;
          ml.instance = new ml.Application({
            rootName: artist.length > 0 ? artist : 'The Rolling Stones'
          });
        },
        open: function() {
          $("#dialog-form").keypress(function(e) {
            if (e.keyCode == $.ui.keyCode.ENTER) {
              $(this).dialog('close');
              e.preventDefault();
              return false;
            }
          });
        }
      });
    </script>
  </body>
</html>
